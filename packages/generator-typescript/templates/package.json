<%_
// This template is used if the Option `package` is enabled
let entryPointName = importName
if (packageName === 'Gjs') {
  entryPointName = 'gjs'
}
let depVersion = packageYarn ? 'workspace:^' : APP_VERSION
_%>
{
    "name": "<%- npmScope %>/<%- importName %>",
    <%_ if(typeof girModule !== "undefined"){ _%>
    "version": "<%- girModule.libraryVersion %>-<%- APP_VERSION %>",
    <%_ } else { _%>
    "version": "<%- APP_VERSION %>",
    <%_ } _%>
    "description": "<%- PACKAGE_DESC %>",
    "type": "module",
    "module": "<%- entryPointName %>.js",
    "main": "<%- entryPointName %>.js",
    "exports": {
      <%_ if (packageName === 'Gjs' && generateAlias) { _%>
        "./tsconfig.alias.json": "./tsconfig.alias.json",
      <%_ } _%>
        <%_ if (packageName === 'Gjs') { _%>
        "./ambient": {
          "types": "./ambient.d.ts",
          "default": "./ambient.js"
        },
        "./gettext": {
          "types": "./gettext.d.ts",
          "default": "./gettext.js"
        },
        "./system": {
          "types": "./system.d.ts",
          "default": "./system.js"
        },
        "./cairo": {
          "types": "./cairo.d.ts",
          "default": "./cairo.js"
        },
      <%_ } _%>
      <%_ if (entryPointName === 'gjs') { _%>
      "./ambient": {
        "types": "./ambient.d.ts",
        "default": "./ambient.js"
      },
      "./dom": {
        "types": "./dom.d.ts",
        "default": "./dom.js"
      },
      <%_ } else {_%>
      "./ambient": {
        "types": "./<%- entryPointName %>-ambient.d.ts",
        "default": "./<%- entryPointName %>-ambient.js"
      },
      "./import": {
        "types": "./<%- entryPointName %>-import.d.ts",
        "default": "./<%- entryPointName %>-import.js"
      },
      <%_ } _%>
      ".": {
        "types": "./<%- entryPointName %>.d.ts",
        "default": "./<%- entryPointName %>.js"
      }
    },
    "scripts": {
      "test": "NODE_OPTIONS=--max_old_space_size=9216 tsc --noEmit <%- entryPointName %>.d.ts"
    },
    "dependencies": {
      <%_ if (packageName !== 'Gjs') { _%>
      "<%- npmScope %>/gjs": "<%- depVersion %>"<%_ if(deps.length > 0 ) { _%>,<%_ } _%>
      <%_ } _%>
      <%_ for (let i = 0; i < deps.length;  i++ ) { _%>
      <%_ if (!packageYarn) { _%>
        <%_ // girModule = dep.getModule(girModules, deps[i]) _%>
        <%_ // depVersion = `${girModule.libraryVersion}-${APP_VERSION}` _%>
        <%_ depVersion = '*' _%>
      <%_ } _%>
      "<%- deps[i].importPath %>": "<%- depVersion %>"<%_ if(i < deps.length - 1) { _%>,<%_ } _%>
      <% } %>
    },
    "devDependencies": {
      "typescript": "*"
    },
    "keywords": [<%- PACKAGE_KEYWORDS %>],
    "author": "<%- APP_NAME %>",
    "license": "MIT",
    "repository": {
      "type": "git",
      "url": "git+https://github.com/gjsify/ts-for-gir.git"
    },
    "bugs": {
      "url": "https://github.com/gjsify/ts-for-gir/issues"
    },
    "homepage": "https://github.com/gjsify/types/tree/main/<%- importName %>#readme"
}
